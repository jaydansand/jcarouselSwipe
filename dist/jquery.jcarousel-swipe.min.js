!function(t){"use strict";t.jCarousel.plugin("jcarouselSwipe",{_options:{perSwipe:1,draggable:!0,method:"scroll"},_init:function(){var t=this;this.carousel().on("jcarousel:reloadend",function(){t._reload()})},_create:function(){this._instance=this.carousel().data("jcarousel"),this._instance._element.css("touch-action",this._instance.vertical?"pan-x":"pan-y"),this._carouselOffset=this.carousel().offset()[this._instance.lt]+parseInt(this.carousel().css(this._instance.vertical?"border-top-width":"border-left-width"))+parseInt(this.carousel().css(this._instance.vertical?"padding-top":"padding-left")),this._slidesCount=this._instance.items().length,this.carousel().find("img, a").attr("draggable",!1).css("user-select","none").on("dragstart",function(t){t.preventDefault()}),this._destroy(),this._instance.items().length>this._instance.fullyvisible().length&&this._initGestures()},_initGestures:function(){function e(e){e=e.originalEvent||e||window.event,l=s(e),c=e.target||e.srcElement,r._options.draggable&&!r._instance.animating&&t(document).on("touchmove.jcarouselSwipe mousemove.jcarouselSwipe",i),t(document).on("touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe",n)}function i(e){var i,n,c;e=e.originalEvent||e||window.event,h=s(e);var f=Math.abs(l[_]-h[_]),d=Math.abs(l[p]-h[p]);return u&&e.preventDefault(),d>10&&d>f&&!u?void t(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe"):void((!r._instance.animating&&f>10||u)&&(i=l[_]-h[_],u||(u=!0,r._addClones(),r._currentLT=r._getListPosition(),c=r._instance.options("items"),o=(t.isFunction(c)?c.call(r._instance):r._instance.list().find(c)).last(),a=r._instance.rtl&&!r._instance.vertical?r._instance.dimension(r._instance.list())-o.position()[r._instance.lt]-r._instance.clipping():(o.position()[r._instance.lt]+r._instance.dimension(o)-r._instance.clipping())*-1),n="circular"===r._instance._options.wrap?r._currentLT-i:r._instance.rtl&&!r._instance.vertical?Math.max(0,Math.min(r._currentLT-i,a)):Math.min(0,Math.max(r._currentLT-i,a)),r._setListPosition(n+"px")))}function n(e){e=e.originalEvent||e||window.event,h=s(e);var i=Math.abs(l[_]-h[_]),n=Math.abs(l[p]-h[p]),a=!1;if(u||!r._options.draggable&&i>10&&i>n){var o=r._getNewTarget(l[_]-h[_]>0);o="circular"===r._instance._options.wrap?o.relative:o["static"],c===e.target&&(a=t(e.target),a.on("click.disable",function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),a.off("click.disable")})),"circular"===r._instance._options.wrap&&(r._removeClones(),r._instance._items=null),u=!1,r._instance[r._options.method](o,function(){"circular"!==r._instance._options.wrap&&(r._removeClones(),r._instance._items=null)}),a&&setTimeout(function(){a.off("click.disable")},0)}t(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe"),t(document).off("touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe")}function s(t){return void 0!==t.touches&&t.touches.length>0?{x:t.touches[0].pageX,y:t.touches[0].pageY}:void 0!==t.changedTouches&&t.changedTouches.length>0?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:void 0!==t.pageX?{x:t.pageX,y:t.pageY}:{x:t.clientX,y:t.clientY}}var a,o,c,r=this,l={},h={},u=!1,_=this._instance.vertical?"y":"x",p=this._instance.vertical?"x":"y";this._element.on("touchstart.jcarouselSwipe mousedown.jcarouselSwipe",e)},_getNewTarget:function(t){var e,i=this._instance.target(),n=this._instance.index(i),s=0,a=this._instance.rtl&&!this._instance.vertical?!t:t;if(this._options.draggable)for(;;){if(e=this._instance.rtl&&!this._instance.vertical?i.offset()[this._instance.lt]+this._instance.dimension(i)-(this._carouselOffset+this._instance.clipping()):i.offset()[this._instance.lt]-this._carouselOffset,!i.length||t&&e>=0||!t&&e<=0)break;if(a){if(i=i.next(),!i.length)break;n+=1}else{if(i=i.prev(),!i.length)break;n-=1}s++}else n=a?n+1:n-1,s=1;return a?n+=Math.abs(s-this._options.perSwipe*Math.ceil(s/this._options.perSwipe)):n-=Math.abs(s-this._options.perSwipe*Math.ceil(s/this._options.perSwipe)),"first"===this._instance._options.wrap?n=Math.min(this._slidesCount-1,n):"last"===this._instance._options.wrap?n=Math.max(0,n):this._instance._options.wrap||(n=Math.max(0,Math.min(this._slidesCount-1,n))),n%=this._slidesCount,s=this._options.perSwipe*Math.ceil(s/this._options.perSwipe),{"static":n,relative:(a?"+":"-")+"="+s}},_getListPosition:function(){var t=this._instance.list(),e=t.position();return this._instance.rtl&&(e.left=t.width()+e.left-this._carousel.width()),e[this._instance.lt]},_setListPosition:function(t){var e=this._instance.options("transitions"),i=!!e.transforms,n=!!e.transforms3d,s={},a="left"===this._instance.lt;t=t||0,n?s.transform="translate3d("+(a?t:0)+","+(a?0:t)+",0)":i?s.transform="translate("+(a?t:0)+","+(a?0:t)+")":s[this._instance.lt]=t,this._instance.list().css(s)},_addClones:function(){var e,i,n,s=this,a=this._instance,o=a.items(),c=a.first(),r=a.last(),l=a.dimension(t(window)),h=[],u=[],_=s._getListPosition(),p={};if(!a._options.wrap)return!1;if("last"!==a._options.wrap){for(i=0,n=0,e=c;i<l;)e=e.prev(),0===e.length?(n=--n<-o.length?-1:n,i+=a.dimension(o.eq(n)),h.push(o.eq(n).clone().attr("data-jcarousel-clone",!0))):i+=a.dimension(e);_=(a.rtl?Math.max(_,i):Math.min(_,-i))+"px",a._items.first().before(h.reverse()),p[a.lt]=_,a.move(p)}if("first"!==a._options.wrap){for(i=0,n=-1,e=r;i<l;)e=e.next(),0===e.length?(n=++n>o.length-1?0:n,i+=a.dimension(o.eq(n)),u.push(o.eq(n).clone().attr("data-jcarousel-clone",!0))):i+=a.dimension(e);a._items.last().after(u)}},_removeClones:function(){var t,e=this._instance.first().position()[this._instance.lt],i={};this._instance.list().find("[data-jcarousel-clone]").remove(),t=e-this._instance.first().position()[this._instance.lt],t&&(i[this._instance.lt]=this._getListPosition()+t+"px",this._instance.move(i))},_destroy:function(){this._element.off("touchstart.jcarouselSwipe mousedown.jcarouselSwipe"),t(document).off("touchmove.jcarouselSwipe mousemove.jcarouselSwipe touchend.jcarouselSwipe touchcancel.jcarouselSwipe mouseup.jcarouselSwipe")},_reload:function(){this._create()}})}(jQuery);